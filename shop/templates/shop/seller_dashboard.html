{% extends 'shop/base.html' %}
{% block content %}
<h1>Seller Dashboard</h1>
<h2>Add Product</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Add Product</button>
</form>
<h2>Your Products</h2>
<ul>
    {% for product in products %}
        <li>
            <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:60px;height:60px;object-fit:cover;">
            <strong>{{ product.name }}</strong> - ${{ product.price }}<br>
            Stock: {{ product.stock }}
            <form method="post" style="display:inline;">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ product.id }}">
                <input type="number" name="new_stock" min="0" value="{{ product.stock }}" style="width:60px;">
                <button type="submit" name="update_stock">Update Stock</button>
            </form>
        </li>
    {% empty %}
        <li>No products yet.</li>
    {% endfor %}
</ul>
<h2>Orders</h2>
<ul>
    {% for order in orders %}
        <li>
            <img src="{{ order.product.image.url }}" alt="{{ order.product.name }}" style="width:40px;height:40px;object-fit:cover;">
            <strong>{{ order.product.name }}</strong> (x{{ order.quantity }})<br>
            Customer: {{ order.customer.username }}<br>
            Payment: {{ order.get_payment_type_display }}<br>
            Status: {{ order.get_status_display }}<br>
            <a href="{% url 'manage_order' order.id %}">Manage</a>
        </li>
    {% empty %}
        <li>No orders yet.</li>
    {% endfor %}
</ul>
{% endblock %}
