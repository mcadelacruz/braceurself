{% extends 'shop/base.html' %}
{% block content %}
<h1 class="mb-4">Your Orders</h1>
{% if orders %}
    <div class="list-group">
    {% for order in orders %}
        <div class="list-group-item">
            <div class="row align-items-center">
                <div class="col-auto">
                    {% if order.product.image %}
                        <img src="{{ order.product.image.url }}" alt="{{ order.product.name }}" style="width:40px;height:40px;object-fit:cover;" class="rounded">
                    {% else %}
                        <div class="rounded bg-light d-flex align-items-center justify-content-center" style="width:40px;height:40px;">
                            <span class="text-muted">No image</span>
                        </div>
                    {% endif %}
                </div>
                <div class="col">
                    <strong>{{ order.product.name }}</strong> (x{{ order.quantity }})<br>
                    Payment: {{ order.get_payment_type_display }}<br>
                    Status: {{ order.get_status_display }}
                    {% if order.done %}
                        <span class="badge bg-success">Done</span>
                    {% endif %}
                    {% if order.cancelled %}
                        <span class="badge bg-danger">Cancelled</span><br>
                        <strong>Reason:</strong> {{ order.cancel_reason }}
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
    </div>
{% else %}
    <p>No orders yet.</p>
{% endif %}
{% endblock %}
